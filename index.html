<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NWM | Front Desk Training Simulator</title>
    <!-- Tailwind CSS for Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel for Browser Execution -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .animate-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [stage, setStage] = useState('intro');
            const [score, setScore] = useState(0);
            const [feedback, setFeedback] = useState(null);

            const stages = {
                intro: {
                    title: "Front Desk Training Simulator",
                    subtitle: "New West Music Internal Training",
                    content: "A warm first greeting makes families feel welcome and valued—building trust and easing first-lesson nerves. Today, you'll play as the front desk staff managing a demo lesson for a new student. Your goal is to apply the NWM 'Emotion First' protocol to create a great experience and register the student.",
                    options: [
                        { text: "Start Training Session", nextStage: 'prep', points: 0 }
                    ]
                },
                prep: {
                    title: "Module 1: Pre-Arrival",
                    subtitle: "The 5-Minute Rule",
                    content: "It's 3:55 PM. A new student, Chloe, is arriving for a Piano demo. You are currently catching up on emails. What is the standard NWM protocol?",
                    options: [
                        { 
                            text: "Keep working on emails until the door opens.", 
                            nextStage: 'greeting', 
                            points: 0,
                            feedback: "Incomplete. Per our guide, we pause other office tasks 5 minutes before arrivals to be fully present and prepared."
                        },
                        { 
                            text: "Pause emails, check student name (Chloe), prep 2 time slots for Ms. Jenny, and set out a Welcome Package.", 
                            nextStage: 'greeting', 
                            points: 25,
                            feedback: "Excellent. Being prepared ensures you can greet the family by name and have answers ready immediately."
                        }
                    ]
                },
                greeting: {
                    title: "Module 2: The Greeting",
                    subtitle: "First Impressions",
                    content: "Chloe and her Mom walk in. They look slightly nervous. How do you initiate the greeting?",
                    options: [
                        { 
                            text: "Stay seated and say: 'Hi! Are you here for the piano demo at 4:00?'", 
                            nextStage: 'rapport', 
                            points: 10,
                            feedback: "Passive. NWM Rule: Always stand up and greet them by name. They should feel 'Expected', not just 'Processed'."
                        },
                        { 
                            text: "Stand up immediately, smile, and say: 'Hi! You must be Chloe! We’ve been expecting you.'", 
                            nextStage: 'rapport', 
                            points: 25,
                            feedback: "Perfect. Standing up and using the student's name immediately builds safety and warmth."
                        }
                    ]
                },
                rapport: {
                    title: "Module 3: Building Rapport",
                    subtitle: "The Waiting Period",
                    content: "The teacher is finishing with another student. You have 2 minutes. How do you build a connection?",
                    options: [
                        { 
                            text: "Offer Chloe a sticker and ask: 'Do you have a favorite song or artist?'", 
                            nextStage: 'instrument_info', 
                            points: 25,
                            feedback: "Great work. You used the 'Fun Gesture' (sticker) to ease Chloe's nerves and engaged her interests."
                        },
                        { 
                            text: "Tell them to have a seat and the teacher will be right out.", 
                            nextStage: 'instrument_info', 
                            points: 5,
                            feedback: "Missed opportunity. Use this time to build rapport—it directly impacts conversion after the lesson."
                        }
                    ]
                },
                instrument_info: {
                    title: "Module 4: Solving Barriers",
                    subtitle: "Instrument Needs",
                    content: "Mom mentions: 'We don't actually own a piano. We wanted to see if she liked it first.'",
                    options: [
                        { 
                            text: "Mention we have rentals and family-budget-friendly instruments for sale in our showroom.", 
                            nextStage: 'post_demo', 
                            points: 25,
                            feedback: "Correct. Highlighting our showroom/rentals removes the 'equipment barrier' to registration."
                        },
                        { 
                            text: "Tell her not to worry, she can practice here on weekends.", 
                            nextStage: 'post_demo', 
                            points: 10,
                            feedback: "Helpful, but NWM aims to get an instrument in the home. Mentioning rentals is the standard protocol."
                        }
                    ]
                },
                post_demo: {
                    title: "Module 5: Post-Demo Conversion",
                    subtitle: "Leading with Emotion",
                    content: "Chloe runs out looking happy. Mom looks at you. What is your first question?",
                    options: [
                        { 
                            text: "Welcome back! Chloe, how did it feel? Did you have fun in there?", 
                            nextStage: 'scheduling', 
                            points: 30,
                            feedback: "Exactly. Emotion first, logistics second. This signature NWM question builds a natural, trust-based transition."
                        },
                        { 
                            text: "Welcome back! So, are we ready to get Chloe registered for next week?", 
                            nextStage: 'scheduling', 
                            points: 10,
                            feedback: "Too rushed. Always validate the child's excitement first before discussing enrollment."
                        }
                    ]
                },
                scheduling: {
                    title: "Module 6: The Assumptive Close",
                    subtitle: "Providing Clarity",
                    content: "Mom says: 'She loved it! What times do you have open?' You prepped two slots earlier.",
                    options: [
                        { 
                            text: "I have Tuesdays at 5 PM or Saturdays at 1 PM held for Chloe. Which is better? (Then wait).", 
                            nextStage: 'registration', 
                            points: 35,
                            feedback: "Masterful. You offered two specific slots and used 'strategic silence' to allow the parent to decide."
                        },
                        { 
                            text: "I have a few openings on Tuesdays, Wednesdays, and Saturdays. What usually works for you?", 
                            nextStage: 'registration', 
                            points: 5,
                            feedback: "Decision Fatigue. Offering too many options makes it harder for the parent to commit."
                        }
                    ]
                },
                registration: {
                    title: "Module 7: Final Wrap",
                    subtitle: "Billing & The Welcome Package",
                    content: "The time is set. Now you explain the details. How do you present the billing and policy?",
                    options: [
                        { 
                            text: "Lessons are weekly at $33/class. You can pause with 30-day notice. Chloe, pick a folder color!", 
                            nextStage: 'summary', 
                            points: 35,
                            feedback: "Perfect execution. You were transparent about pricing and kept the student engaged with the folder choice."
                        },
                        { 
                            text: "It's $33 per lesson. Here is the QR code for the registration form.", 
                            nextStage: 'summary', 
                            points: 15,
                            feedback: "Good, but don't forget the folder and the '30-day notice' policy. Transparency builds long-term trust."
                        }
                    ]
                }
            };

            const handleOptionClick = (option) => {
                setScore(s => s + option.points);
                setFeedback(option.feedback);
                setStage(option.nextStage);
            };

            const reset = () => {
                setStage('intro');
                setScore(0);
                setFeedback(null);
            };

            const current = stages[stage];

            if (stage === 'summary') {
                const percentage = Math.round((score / 200) * 100);
                const grade = percentage > 90 ? "Maestro" : percentage > 70 ? "Lead Coordinator" : "Trainee";
                
                return (
                    <div className="min-h-screen bg-slate-50 flex items-center justify-center p-6">
                        <div className="max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-10 text-center border border-slate-100 animate-in">
                            <div className="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600">
                                <Icon name="check-circle" size={40} />
                            </div>
                            <h1 className="text-3xl font-black text-slate-900 mb-2 tracking-tight">Training Complete</h1>
                            <p className="text-slate-400 font-bold uppercase tracking-widest text-[10px] mb-8">NWM Performance Report</p>
                            
                            <div className="bg-slate-50 rounded-3xl p-8 mb-8 text-left border border-slate-100">
                                <div className="flex justify-between mb-2">
                                    <span className="text-[10px] font-black uppercase text-slate-400">Score</span>
                                    <span className="text-[10px] font-black uppercase text-orange-500">{grade}</span>
                                </div>
                                <div className="text-5xl font-black text-slate-800 mb-2">{percentage}%</div>
                                <p className="text-sm text-slate-500 leading-relaxed font-medium">
                                    You have internalised the NWM conversion protocol. Continue to focus on 'Standing & Greeting' and 'Emotion-First' communication to drive registrations.
                                </p>
                            </div>

                            <button onClick={reset} className="w-full py-5 bg-slate-900 text-white rounded-2xl font-black hover:bg-orange-600 transition-all flex items-center justify-center gap-2 shadow-lg">
                                <Icon name="rotate-ccw" size={18} /> Restart Simulator
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-slate-50 flex items-center justify-center p-6">
                    <div className="max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-slate-100 flex flex-col min-h-[700px] animate-in">
                        <div className="bg-slate-900 px-8 py-4 flex justify-between items-center">
                            <div className="flex items-center gap-2">
                                <Icon name="music" size={14} className="text-orange-500" />
                                <span className="text-white font-black text-[9px] uppercase tracking-[0.2em]">New West Music Simulator</span>
                            </div>
                        </div>

                        <div className="p-10 flex-grow">
                            {stage !== 'intro' && (
                                <div className="mb-8">
                                    <div className="flex justify-between mb-2">
                                        <span className="text-[9px] font-black uppercase text-slate-400 tracking-widest">Protocol Adherence</span>
                                        <span className="text-[9px] font-black text-slate-900">{Math.min(Math.round((score/200)*100), 100)}%</span>
                                    </div>
                                    <div className="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden shadow-inner">
                                        <div className="bg-orange-500 h-full transition-all duration-700" style={{width: `${(score/200)*100}%`}}></div>
                                    </div>
                                </div>
                            )}

                            <h1 className="text-3xl font-black text-slate-900 leading-[1.1] mb-1 tracking-tight">{current.title}</h1>
                            <p className="text-orange-600 font-bold text-[10px] uppercase tracking-widest mb-8">{current.subtitle}</p>

                            {feedback && (
                                <div className={`mb-8 p-5 rounded-2xl border-2 flex gap-4 animate-in ${feedback.includes('Incomplete') || feedback.includes('Passive') || feedback.includes('Fatigue') ? 'bg-rose-50 border-rose-100 text-rose-900' : 'bg-emerald-50 border-emerald-100 text-emerald-900'}`}>
                                    <Icon name={feedback.includes('Excellent') || feedback.includes('Perfect') || feedback.includes('Correct') || feedback.includes('Great') || feedback.includes('Exactly') ? "check-circle" : "alert-circle"} size={18} className="shrink-0 mt-0.5" />
                                    <p className="text-sm font-bold leading-relaxed italic">{feedback}</p>
                                </div>
                            )}

                            <p className="text-slate-600 text-lg font-medium leading-relaxed mb-10 tracking-tight">{current.content}</p>

                            <div className="space-y-4">
                                {current.options.map((opt, i) => (
                                    <button 
                                        key={i} 
                                        onClick={() => handleOptionClick(opt)}
                                        className="w-full text-left p-6 rounded-2xl bg-slate-50 border-2 border-transparent hover:border-slate-900 hover:bg-white transition-all group flex items-center justify-between gap-4 shadow-sm"
                                    >
                                        <span className="font-bold text-slate-800 leading-tight tracking-tight">{opt.text}</span>
                                        <div className="w-8 h-8 rounded-full bg-white border border-slate-100 flex items-center justify-center group-hover:bg-slate-900 group-hover:text-white transition-all shrink-0">
                                            <Icon name="arrow-right" size={16} />
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="p-8 pt-0 mt-auto opacity-20 text-[8px] font-black uppercase tracking-[0.3em] flex justify-between italic">
                            <span>© New West Music</span>
                            <span>Internal Training v1.1</span>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
