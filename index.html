<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NWM | Training Portal</title>
    <!-- Tailwind CSS for Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel for Browser Execution -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .animate-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [stage, setStage] = useState('intro');
            const [score, setScore] = useState(0);
            const [feedback, setFeedback] = useState(null);

            const VIDEO_URL = "#"; // PASTE YOUR VIDEO LINK HERE

            const stages = {
                intro: {
                    title: "Front Desk Training Portal",
                    subtitle: "Mastering the NWM Experience",
                    content: "A warm first greeting makes families feel welcome and valued—building trust and easing first-lesson nerves. Today, you'll play as the front desk staff managing a demo lesson for a new student. Your goal is to apply the NWM 'Emotion First' protocol to build community, solve barriers, and register the student.",
                    options: [
                        { text: "Watch Training Video", isVideo: true },
                        { text: "Start Training Session", nextStage: 'prep', points: 0 }
                    ]
                },
                prep: {
                    title: "Module 1: Pre-Arrival",
                    subtitle: "The 5-Minute Rule",
                    content: "It's 5 minutes before a new demo. You're catching up on admin work. What is the NWM protocol?",
                    options: [
                        { text: "Pause tasks, check Airtable for student name, and prep 2 slots on a sticky note.", nextStage: 'greeting', points: 25, feedback: "Excellent. Preparedness allows you to be fully present when they walk in." },
                        { text: "Finish your task quickly so you aren't distracted when they arrive.", nextStage: 'greeting', points: 0, feedback: "Incorrect. We pause tasks 5 mins before arrivals to ensure the family feels expected." }
                    ]
                },
                greeting: {
                    title: "Module 2: The Greeting",
                    subtitle: "Stand & Greet",
                    content: "A parent and child walk in. They look a bit nervous. How do you open?",
                    options: [
                        { text: "Stand up immediately, smile, and say: 'Hi! You must be Sam! We’ve been expecting you.'", nextStage: 'rapport', points: 25, feedback: "Perfect. Standing up and using names creates immediate trust." },
                        { text: "Wave and ask: 'Hi there, are you here for the 4:00 demo today?'", nextStage: 'rapport', points: 10, feedback: "Passive. Always stand and address them by name to make them feel valued." }
                    ]
                },
                rapport: {
                    title: "Module 3: Rapport & Rituals",
                    subtitle: "The First Touchpoint",
                    content: "The teacher is finishing with a student. You are with the family. How do you use the 'Fun Gesture' rule?",
                    options: [
                        { text: "Offer a sticker to the student and ask: 'Have you ever tried this instrument before?'", nextStage: 'post_demo', points: 25, feedback: "Great. Stickers ease first-lesson nerves and the question starts a conversation." },
                        { text: "Invite them to have a seat and tell them the teacher will be out soon.", nextStage: 'post_demo', points: 5, feedback: "Missed rapport opportunity. Use the sticker gesture to build comfort." }
                    ]
                },
                post_demo: {
                    title: "Module 4: Post-Demo Connection",
                    subtitle: "Emotion First",
                    content: "The student runs out smiling. The parent follows. What is your very first question?",
                    options: [
                        { text: "Welcome back! Sam, how did it feel? Did you have fun in there?", nextStage: 'value_pitch', points: 30, feedback: "Exactly. Emotion first, logistics second. This is our signature power question." },
                        { text: "Welcome back! Should we check the schedule to get Sam registered?", nextStage: 'value_pitch', points: 10, feedback: "Too fast. Always validate the joy and experience before discussing the schedule." }
                    ]
                },
                value_pitch: {
                    title: "Module 5: Building Community",
                    subtitle: "Recitals & Rewards",
                    content: "The parent asks how the progress works. What key NWM benefits do you mention?",
                    options: [
                        { text: "Mention our 3 annual recitals and our sticker chart reward system for home practice.", nextStage: 'showroom', points: 30, feedback: "Perfect. Recitals build excitement and the sticker chart makes home practice fun." },
                        { text: "Explain that they get a book and move through different levels each week.", nextStage: 'showroom', points: 15, feedback: "Good, but missing the 'Community' feel of recitals and the 'Fun' of the reward system." }
                    ]
                },
                showroom: {
                    title: "Module 6: Removing Barriers",
                    subtitle: "The Showroom & Rentals",
                    content: "The parent mentions: 'We don't actually own an instrument yet. We aren't sure where to get one.'",
                    options: [
                        { text: "Point out our showroom with affordable rentals and instruments for sale.", nextStage: 'scheduling', points: 25, feedback: "Correct. Solving the equipment barrier is essential for registration." },
                        { text: "Tell them that's fine, the teacher has a spare one they can use for now.", nextStage: 'scheduling', points: 10, feedback: "Vague. Always suggest a home solution via our rentals/showroom." }
                    ]
                },
                scheduling: {
                    title: "Module 7: The Close",
                    subtitle: "Assumptive Scheduling",
                    content: "Dad is ready to sign up. How do you present the time slots?",
                    options: [
                        { text: "Offer 2 specific slots (e.g., Wed at 5 or Sat at 1) and wait in silence for a choice.", nextStage: 'folder_ritual', points: 35, feedback: "Masterful. Silence is your friend. Narrowed options prevent decision fatigue." },
                        { text: "Ask them what their general availability is like for the coming weeks.", nextStage: 'folder_ritual', points: 10, feedback: "Passive. Lead with the options you prepped earlier to make it easy for them." }
                    ]
                },
                folder_ritual: {
                    title: "Module 8: The Registration Ritual",
                    subtitle: "The Welcome Package",
                    content: "The time is set. As you finalize, what is the 'Student Ownership' moment?",
                    options: [
                        { text: "Hand over the Welcome Folder and let the student pick their favorite color.", nextStage: 'logistics', points: 25, feedback: "Exactly. Picking a color gives the student immediate ownership and excitement." },
                        { text: "Give the folder to the parent and explain the contents while they fill out the form.", nextStage: 'logistics', points: 10, feedback: "Functional, but misses the fun ritual for the child." }
                    ]
                },
                logistics: {
                    title: "Module 9: Final Logistics",
                    subtitle: "Pricing & Policies",
                    content: "How do you explain the billing and the 'pause' policy?",
                    options: [
                        { text: "Explain it's $33/lesson, billed monthly, with a 30-day notice required to pause.", nextStage: 'summary', points: 30, feedback: "Perfect transparency. This prevents billing confusion later." },
                        { text: "Tell them we'll email the full pricing and policy guide once they register.", nextStage: 'summary', points: 5, feedback: "Be transparent now. Clarity on price and the pause policy builds trust." }
                    ]
                }
            };

            const handleOptionClick = (option) => {
                if (option.isVideo) { window.open(VIDEO_URL, '_blank'); return; }
                setScore(s => s + option.points);
                setFeedback(option.feedback);
                setStage(option.nextStage);
            };

            if (stage === 'summary') {
                const percentage = Math.round((score / 280) * 100);
                const grade = percentage > 90 ? "Maestro" : percentage > 70 ? "Lead Coordinator" : "Trainee";
                return (
                    <div className="min-h-screen bg-slate-50 flex items-center justify-center p-6 text-center animate-in">
                        <div className="max-w-md w-full bg-white rounded-[3rem] shadow-2xl p-12 border border-slate-100">
                            <div className="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600">
                                <Icon name="star" size={40} className="fill-orange-600" />
                            </div>
                            <h1 className="text-4xl font-black text-slate-900 mb-2">Mastery: {percentage}%</h1>
                            <p className="text-slate-400 font-bold uppercase tracking-widest text-[10px] mb-8">{grade} Level</p>
                            <div className="bg-slate-50 rounded-3xl p-6 mb-10 text-left border border-slate-100">
                                <p className="text-sm text-slate-600 leading-relaxed font-medium">
                                    You've mastered the full NWM lifecycle: from the **Folder Color Ritual** to the **3 Recitals** explanation. Your focus on rapport and clarity will drive our registrations!
                                </p>
                            </div>
                            <button onClick={() => { setStage('intro'); setScore(0); setFeedback(null); }} className="w-full py-5 bg-slate-900 text-white rounded-2xl font-black shadow-lg hover:bg-orange-600 transition-all flex items-center justify-center gap-2">
                                <Icon name="rotate-ccw" size={18} /> New Demo Shift
                            </button>
                        </div>
                    </div>
                );
            }

            const current = stages[stage];

            return (
                <div className="min-h-screen bg-slate-50 flex items-center justify-center p-6">
                    <div className="max-w-md w-full bg-white rounded-[3rem] shadow-2xl overflow-hidden animate-in border border-slate-100 flex flex-col min-h-[780px]">
                        <div className="bg-slate-900 px-10 py-5 flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <Icon name="music" size={14} className="text-orange-500" />
                                <span className="text-white font-black text-[9px] uppercase tracking-[0.3em]">NWM Training Simulator</span>
                            </div>
                        </div>

                        <div className="p-10 flex-grow">
                            {stage !== 'intro' && (
                                <div className="mb-10">
                                    <div className="flex justify-between mb-2">
                                        <span className="text-[10px] font-black uppercase text-slate-400 tracking-widest italic">Protocol Strength</span>
                                        <span className="text-[10px] font-black text-orange-600">{Math.min(Math.round((score/280)*100), 100)}%</span>
                                    </div>
                                    <div className="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden shadow-inner">
                                        <div className="bg-orange-500 h-full transition-all duration-1000" style={{width: `${(score/280)*100}%`}}></div>
                                    </div>
                                </div>
                            )}

                            <h1 className="text-3xl font-black text-slate-900 leading-[1.1] mb-1 tracking-tighter">{current.title}</h1>
                            <p className="text-orange-600 font-black text-[10px] uppercase tracking-[0.2em] mb-10">{current.subtitle}</p>

                            {feedback && (
                                <div className={`mb-10 p-6 rounded-[2rem] border-2 flex gap-4 animate-in ${feedback.includes('Incorrect') || feedback.includes('Passive') || feedback.includes('misses') || feedback.includes('Vague') ? 'bg-rose-50 border-rose-100 text-rose-900' : 'bg-emerald-50 border-emerald-100 text-emerald-900'}`}>
                                    <Icon name={feedback.includes('Perfect') || feedback.includes('Correct') || feedback.includes('Great') || feedback.includes('Exactly') || feedback.includes('Masterful') || feedback.includes('Excellent') ? "check-circle" : "alert-circle"} size={20} className="shrink-0 mt-0.5" />
                                    <p className="text-sm font-bold leading-relaxed italic">{feedback}</p>
                                </div>
                            )}

                            <p className="text-slate-600 text-lg font-medium leading-relaxed mb-12 tracking-tight">{current.content}</p>

                            <div className="space-y-4">
                                {current.options.map((opt, i) => (
                                    <button 
                                        key={i} 
                                        onClick={() => handleOptionClick(opt)} 
                                        className={`w-full text-left p-6 rounded-[2rem] border-2 transition-all group flex items-center justify-between gap-4 shadow-sm ${opt.isVideo ? 'bg-orange-500 border-orange-500 text-white hover:bg-orange-600 hover:scale-[1.02]' : 'bg-slate-50 border-transparent hover:border-slate-900 hover:bg-white hover:scale-[1.01]'}`}
                                    >
                                        <span className="font-black leading-tight tracking-tight">{opt.text}</span>
                                        <Icon name={opt.isVideo ? "play-circle" : "arrow-right"} size={20} className={opt.isVideo ? "text-white" : "text-slate-300 group-hover:text-slate-900"} />
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="p-10 pt-0 mt-auto opacity-20 text-[8px] font-black uppercase tracking-[0.4em] flex justify-between italic">
                            <span>New West Music</span>
                            <span>Simulator v1.5</span>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
