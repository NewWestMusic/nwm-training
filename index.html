<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NWM | Front Desk Master Simulator v4.0</title>
    <!-- Tailwind CSS for Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel for Browser Execution -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .animate-in { animation: fadeIn 0.4s ease-out; }
        .animate-pop { animation: popIn 0.3s cubic-bezier(0.26, 0.53, 0.74, 1.48); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        .aspect-video { aspect-ratio: 16 / 9; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [stage, setStage] = useState('intro');
            const [score, setScore] = useState(0);
            const [feedback, setFeedback] = useState(null);
            const [showVideo, setShowVideo] = useState(false);

            // --- NWM VIDEO EMBED URL ---
            const EMBED_URL = "https://www.youtube.com/embed/9CdTtFxzWNA"; 

            const stages = {
                intro: {
                    title: "Front Desk Training Portal",
                    subtitle: "New West Music Internal Training",
                    content: "A warm first greeting makes families feel welcome and valued—building trust and easing first-lesson nerves. Today, you'll play as the front desk staff managing a demo lesson for a new student, Sam. Master the flow from 'Total Presence' to the final 'Folder Color Ritual'.",
                    options: [
                        { text: "Watch NWM Masterclass Video", action: () => setShowVideo(true), isVideo: true },
                        { text: "Start Training Session", action: () => setStage('prep') }
                    ]
                },
                prep: {
                    title: "Module 1: The Total Presence Rule",
                    subtitle: "3:55 PM Preparation",
                    content: "Sam's Guitar demo is in 5 minutes. You are currently finishing up a billing email and have several admin tabs open. What is the standard NWM protocol to prepare for the family's arrival?",
                    options: [
                        { text: "Stop everything. Close all browser tabs/emails, clear your physical desk, and take a minute to be fully present while checking Google Calendar for Sam's info and 2 potential time slots.", points: 25, nextStage: 'greeting', feedback: "Excellent. Clearing your space (physically and digitally) ensures you are 100% available and 'Expected' when they walk in. You are a host, not an office worker." },
                        { text: "Quickly finish the current email so your head is clear, keeping Google Calendar open in a background tab just in case.", points: 5, nextStage: 'greeting', feedback: "Incorrect. Our goal is Total Presence. You shouldn't be 'finishing up' when a new family arrives—you should be waiting for them with zero distractions." }
                    ]
                },
                greeting: {
                    title: "Module 2: The Greeting",
                    subtitle: "Sam & Mr. Smith Arrive",
                    content: "Sam (8 years old) and his Dad walk through the door. Sam looks nervous and is hiding behind his Dad. How do you handle the first 10 seconds?",
                    options: [
                        { text: "Stand up immediately, walk toward them, and say: 'Hi! You must be Sam and Mr. Smith! Welcome to NWM, we’ve been expecting you.'", points: 25, nextStage: 'rapport', feedback: "Perfect. Names + Standing Up = Instant Trust. It signals that their arrival is the most important part of your day." },
                        { text: "Wave and smile from your chair: 'Hi there! Are you Sam? Your teacher will be out in just a few minutes.'", points: 10, nextStage: 'rapport', feedback: "Passive. Rule Check: Always stand up. They should feel 'Expected and Valued', not like they are interrupting your desk tasks." }
                    ]
                },
                rapport: {
                    title: "Module 3: Rapport Rituals",
                    subtitle: "The Fun Gesture",
                    content: "The teacher is finishing with another student. You have 2 minutes. How do you use the 'Sticker Rule' to connect with Sam?",
                    options: [
                        { text: "Offer Sam a welcome sticker and ask: 'Sam, do you have a favorite song you'd love to learn on guitar?'", points: 25, nextStage: 'education', feedback: "Great work. The sticker breaks the ice, and the question helps Sam feel excited about the music." },
                        { text: "Ask Dad about the traffic and tell Sam to wait quietly in the chairs.", points: 5, nextStage: 'education', feedback: "Missed rapport opportunity. Always use the 'Sticker Gesture' specifically to help the student feel at ease." }
                    ]
                },
                education: {
                    title: "Module 4: Educational Point of View",
                    subtitle: "Explaining the Methodology",
                    content: "Mr. Smith asks: 'How do the lessons actually work? Is he just going to play games?' How do you explain our methodology?",
                    options: [
                        { text: "Explain our methodology is organized by level; Sam will progress step-by-step each week with graded exercises and weekly practice habits at home.", points: 30, nextStage: 'post_demo', feedback: "Masterful. Graded levels and weekly practice goals provide the educational 'roadmap' and value parents are looking for." },
                        { text: "Explain that our teachers are experts and will pick songs that Sam likes to keep him interested.", points: 15, nextStage: 'post_demo', feedback: "A bit vague. Parents want to hear about the 'Graded Level' system and the commitment to weekly progress habits." }
                    ]
                },
                post_demo: {
                    title: "Module 5: Post-Demo Connection",
                    subtitle: "Emotion Before Logistics",
                    content: "Sam runs out of the room beaming. Dad follows. What is your signature power question?",
                    options: [
                        { text: "Welcome back! Sam, how did it feel? Did you have fun in there?", points: 30, nextStage: 'value_pitch', feedback: "Perfect. We always validate the experience and joy before discussing the calendar or price." },
                        { text: "Great job, Sam! Mr. Smith, ready to sign him up for that Tuesday spot we have in Google Calendar?", points: 10, nextStage: 'value_pitch', feedback: "Too fast. Always ask 'How did it feel?' first to let them share the win." }
                    ]
                },
                value_pitch: {
                    title: "Module 6: Building Community",
                    subtitle: "Recitals & Rewards",
                    content: "Dad asks what the long-term goals are for students. What do you mention to build excitement?",
                    options: [
                        { text: "Mention our 3 annual recitals and our sticker chart reward system where students earn tokens for small prizes.", points: 30, nextStage: 'showroom', feedback: "Exactly. 3 recitals per year and tangible prizes for practice are major NWM value-add touchpoints." },
                        { text: "Mention we have 2 recitals and that students get a certificate when they finish a book.", points: 15, nextStage: 'showroom', feedback: "Close, but remember we host 3 recitals a year and use sticker charts specifically for tokens and prizes!" }
                    ]
                },
                showroom: {
                    title: "Module 7: Solving Barriers",
                    subtitle: "The Showroom Advantage",
                    content: "Dad mentions: 'He loved it, but we don't have a guitar. I'm worried about the cost if he quits next month.'",
                    options: [
                        { text: "Mention our showroom with affordable rentals and beginner instruments for sale. This lets Sam try it at home with minimal risk.", points: 25, nextStage: 'scheduling', feedback: "Correct. Highlighting our showroom rentals removes the equipment barrier instantly." },
                        { text: "Tell him Sam can borrow our guitars here for every lesson until he's sure.", points: 10, nextStage: 'scheduling', feedback: "Vague. Sam needs an instrument at home for weekly practice to succeed. Always suggest a rental solution." }
                    ]
                },
                scheduling: {
                    title: "Module 8: The Close",
                    subtitle: "Assumptive Scheduling",
                    content: "Dad is ready. How do you present the time options you prepped earlier from Google Calendar?",
                    options: [
                        { text: "I have Tuesdays at 4:00 or Thursdays at 5:00 held for Sam. Which is easier? (Then stay silent).", points: 35, nextStage: 'folder_ritual', feedback: "Masterful. Specific options + Silence = Confident Enrollment. Don't over-explain." },
                        { text: "I'll look at the Google Calendar now. What days usually work best for your commute?", points: 10, nextStage: 'folder_ritual', feedback: "Passive. Lead with the 2 slots you prepped earlier to make the decision easy for them." }
                    ]
                },
                folder_ritual: {
                    title: "Module 9: Student Ownership",
                    subtitle: "The Folder Ritual",
                    content: "He picks Tuesdays at 4 PM! As you finalize the registration, how do you handle the Welcome Folder?",
                    options: [
                        { text: "Sam, I have your Welcome Folder here! Would you like the blue one or the orange one?", points: 25, nextStage: 'logistics', feedback: "Exactly. Picking a color gives the student immediate ownership and excitement for their first 'real' lesson." },
                        { text: "Hand the folder to the parent and explain the stickers inside.", points: 10, nextStage: 'logistics', feedback: "Functional, but missed the color-choice ritual which is a key brand experience for the student." }
                    ]
                },
                logistics: {
                    title: "Module 10: Final Transparency",
                    subtitle: "Billing & Policy",
                    content: "How do you explain the billing and the 'pause' policy?",
                    options: [
                        { text: "Lessons are $33/class, billed monthly. You can pause anytime with 30-day notice.", points: 30, nextStage: 'summary', feedback: "Perfect. Transparency on price and the pause policy builds long-term trust." },
                        { text: "It's billed monthly automatically. Our full policy is on the website.", points: 15, nextStage: 'summary', feedback: "Always mention the $33 rate and the 30-day notice explicitly during the conversation." }
                    ]
                }
            };

            const handleOptionClick = (option) => {
                if (option.action) {
                    option.action();
                } else {
                    setScore(s => s + (option.points || 0));
                    setFeedback(option.feedback);
                    setStage(option.nextStage);
                }
            };

            const reset = () => {
                setStage('intro');
                setScore(0);
                setFeedback(null);
            };

            if (stage === 'summary') {
                const percentage = Math.round((score / 310) * 100); 
                const grade = percentage > 90 ? "Maestro" : percentage > 70 ? "Coordinator" : "Trainee";
                return (
                    <div className="min-h-screen flex items-center justify-center p-6 text-center animate-in">
                        <div className="max-w-md w-full bg-white rounded-[3rem] shadow-2xl p-12 border border-slate-100">
                            <div className="w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-8 text-orange-600">
                                <Icon name="award" size={48} className="fill-orange-500" />
                            </div>
                            <h1 className="text-4xl font-black text-slate-900 mb-2 tracking-tighter">Mastery: {percentage}%</h1>
                            <p className="text-slate-400 font-bold uppercase tracking-widest text-[10px] mb-8">{grade} Certification</p>
                            <div className="bg-slate-50 rounded-3xl p-8 mb-10 text-left border border-slate-100">
                                <p className="text-sm text-slate-600 leading-relaxed font-medium">
                                    Excellent shift! You mastered the **Presence Rule**, referenced **Google Calendar**, pitched the **Graded Level methodology**, and handled the **Folder Ritual** perfectly!
                                </p>
                            </div>
                            <button onClick={reset} className="w-full py-5 bg-slate-900 text-white rounded-2xl font-black shadow-lg hover:bg-orange-600 transition-all flex items-center justify-center gap-2">
                                <Icon name="rotate-ccw" size={18} /> New Training Shift
                            </button>
                        </div>
                    </div>
                );
            }

            const current = stages[stage];

            return (
                <div className="min-h-screen flex items-center justify-center p-6 relative">
                    {/* Video Modal */}
                    {showVideo && (
                        <div className="fixed inset-0 z-50 bg-slate-900/95 flex items-center justify-center p-4 backdrop-blur-sm">
                            <div className="max-w-4xl w-full bg-black rounded-3xl overflow-hidden shadow-2xl animate-pop border border-slate-700">
                                <div className="flex justify-between items-center p-4 bg-slate-800 text-white">
                                    <span className="font-black text-xs uppercase tracking-widest">NWM Masterclass</span>
                                    <button onClick={() => setShowVideo(false)} className="hover:text-orange-500 transition-colors">
                                        <Icon name="x" size={24} />
                                    </button>
                                </div>
                                <div className="aspect-video w-full bg-slate-900">
                                    <iframe 
                                        src={EMBED_URL} 
                                        className="w-full h-full" 
                                        frameBorder="0" 
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                        allowFullScreen
                                    ></iframe>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Simulation Interface Card */}
                    <div className="max-w-md w-full bg-white rounded-[3rem] shadow-2xl overflow-hidden animate-in border border-slate-100 flex flex-col min-h-[820px]">
                        <div className="bg-slate-900 px-10 py-5 flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <Icon name="music" size={14} className="text-orange-500" />
                                <span className="text-white font-black text-[9px] uppercase tracking-[0.3em]">NWM Master Simulator v4.0</span>
                            </div>
                        </div>

                        <div className="p-10 flex-grow">
                            {stage !== 'intro' && (
                                <div className="mb-10">
                                    <div className="flex justify-between mb-2">
                                        <span className="text-[10px] font-black uppercase text-slate-400 tracking-widest italic tracking-tighter">Conversion Confidence</span>
                                        <span className="text-[10px] font-black text-orange-600">{Math.min(Math.round((score/310)*100), 100)}%</span>
                                    </div>
                                    <div className="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden shadow-inner">
                                        <div className="bg-orange-500 h-full transition-all duration-1000" style={{width: `${(score/310)*100}%`}}></div>
                                    </div>
                                </div>
                            )}

                            <h1 className="text-3xl font-black text-slate-900 leading-[1.1] mb-1 tracking-tighter">{current.title}</h1>
                            <p className="text-orange-600 font-black text-[10px] uppercase tracking-[0.2em] mb-10">{current.subtitle}</p>

                            {feedback && (
                                <div className={`mb-10 p-6 rounded-[2.5rem] border-2 flex gap-4 animate-in ${feedback.includes('Incorrect') || feedback.includes('Passive') || feedback.includes('missed') || feedback.includes('Vague') ? 'bg-rose-50 border-rose-100 text-rose-900' : 'bg-emerald-50 border-emerald-100 text-emerald-900'}`}>
                                    <Icon name={feedback.includes('Correct') || feedback.includes('Perfect') || feedback.includes('Masterful') || feedback.includes('Excellent') ? "check-circle" : "alert-circle"} size={20} className="shrink-0 mt-0.5" />
                                    <p className="text-sm font-bold leading-snug italic leading-tight">{feedback}</p>
                                </div>
                            )}

                            <p className="text-slate-600 text-lg font-medium leading-relaxed mb-12 tracking-tight">{current.content}</p>

                            <div className="space-y-4">
                                {current.options.map((opt, i) => (
                                    <button 
                                        key={i} 
                                        onClick={() => handleOptionClick(opt)} 
                                        className={`w-full text-left p-6 rounded-[2.2rem] border-2 transition-all group flex items-center justify-between gap-4 shadow-sm hover:scale-[1.01] ${opt.isVideo ? 'bg-orange-500 border-orange-500 text-white hover:bg-orange-600' : 'bg-slate-50 border-transparent hover:border-slate-900 hover:bg-white'}`}
                                    >
                                        <span className="font-black leading-tight tracking-tight">{opt.text}</span>
                                        <Icon name={opt.isVideo ? "play" : "chevron-right"} size={18} className={opt.isVideo ? "text-white fill-white" : "text-slate-300 group-hover:text-slate-900"} />
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="p-10 pt-0 mt-auto opacity-20 text-[8px] font-black uppercase tracking-[0.4em] flex justify-between italic text-center">
                            <span>New West Music Master Simulator v4.0</span>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
